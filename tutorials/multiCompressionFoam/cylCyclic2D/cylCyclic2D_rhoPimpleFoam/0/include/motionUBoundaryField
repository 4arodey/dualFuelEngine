#include        "../../constant/engineProperties"

rpmFrequency     #calc "$rpm/60.0";

maxPistonU       11; // #calc "3.14*$S*$rpm/30";

initialPistonPosition #calc "$EVO*$deltaTCA";

maxValveU        2;

boundaryField
{
/* Inlet */
    "injection|inlet"
    {
        type            uniformFixedValue;
        uniformValue    constant 0;
    }

/* Outlet */
    outlet
    {
        $inlet
    }

/* Walls */
    piston
    {
        type            uniformFixedValue;
        uniformValue
        {
            type        sine;
            frequency   $rpmFrequency;
            amplitude   $maxPistonU;
            start       $initialPistonPosition;
            level       0;

            scale       1; /* OpenFOAM v7 or lower */
        }
    }
    valveHead
    {
        type            uniformFixedValue;
        uniformValue    table
        (
            (0          0         )
            (0.045 #neg $maxValveU) /* +U           •   */
            (0.091      0         ) /*  |          / \  */
            (0.136      0         ) /*  0 •   •---•   • */
            (0.181      $maxValveU) /*  |  \ /          */
            (0.226      0         ) /* -U   •           */
        );
    }
    valveStem
    {
        type            slip;
    }
    walls
    {
        type            uniformFixedValue;
        uniformValue    constant 0;
    }

/* ACMI & cyclic patches */
    #includeEtc "caseDicts/setConstraintTypes"

    // Inner ACMI patch
    innerACMI1_couple
    {
        type            slip;
        patchType       cyclicACMI;
    }
    innerACMI1_blockage
    {
        type            slip;
    }
    innerACMI2_couple
    {
        type            slip;
        patchType       cyclicACMI;
    }
    innerACMI2_blockage
    {
        type            slip;
    }

    // Outer ACMI patch
    outerACMI1_couple
    {
        type            uniformFixedValue;
        patchType       cyclicACMI;
        uniformValue    0;
    }
    outerACMI1_blockage
    {
        type            uniformFixedValue;
        uniformValue    0;
    }
    outerACMI2_couple
    {
        type            slip;
        patchType       cyclicACMI;
    }
    outerACMI2_blockage
    {
        type            slip;
        value           uniform 0;
    }
}
